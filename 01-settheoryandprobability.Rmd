# Set Theory and Probability 

In the course of research, behavioral scientists will often take samples of human behavior, e.g. a survey of a group of people, measurements of reaction time, etc. These samples will take some _outcome_, and most of us understand and have observed the inherent randomness of this act. That is to say, you might take the exact same sample in a carefully controlled circumstance and get different results every time.

Statisticians often refer to an analogous circumstance when talking about probability. Suppose we are able to describe all the possible outcomes of our sampling procedure. We take samples over and over again in the same circumstances, and each time the outcome changes. This is referred to as a **random experiment**. In order to familiarize you with some introductory concepts around probability, we're going to start in this context of a random experiment. First, we'll learn about sets and set theory in order to describe our **sample space**. This will also be useful in describing the form that outcomes of a random experiment may take. Then we'll more concretely define the randomness of our experiment by talking about **probability** - the quantification of randomness.

## Sets and Sample Spaces

Before we get into it, we aren't going to learn set theory in it's entirety. That would be overly (and hilariously) ambitious. What we are going to learn will make understanding later sections easier, get your brain warmed up, and make it a bit easier to understand set notation in other circumstances. The first step in conducting a random experiment is clearly defining all the possible outcomes of your sampling procedure. This is referred to as the **sample space**. Suppose we have five different possible outcomes in our sample space: A, B, C, D, and E. Let's call this sample space $S$. Then we would describe it like this:

$$
S = \{A, B, C, D, E\}
(\#eq:discreteset)
$$
That is to say we'll describe the set $S$ with curly braces, and on the inside of the curly braces, there shall be a list of _distinct_ elements of our set. The sample space above is an example of a **discrete** sample space - meaning it either contains a finite number of elements or it is _countable_. In this case, the sample space has a finite number of elements (five to be exact), so we can call it discrete.

On the other hand, describing a countable, but not necessarily finite, sample space can be tricky. My hope is you can gain a small sense for it from my explanation here. We'll see examples of it later. Specifically, a discrete sample space can also contain an _infinite_ number of elements - so long as those elements can be lined up one-to-one with the natural numbers (e.g. 1, 2, 3, 4, ...). That is, the elements can be "counted", albeit infinitely and forever. This is probably not the most intuitive definition for people who don't think about mathematics every day (it certainly wasn't for me). In another, more intuitive sense, a discrete sample space - finite or infinite - has elements with nothing in between them. In $S$ above, there is nothing in between A and B, for example. If your discrete set had an infinite number of elements, you could line them up (arbitrarily) with the natural numbers. And, after this alignment, you could find nothing between the first and second elements (or any given sequential pair for that matter).

With that point out of the way, we may also find ourselves sampling from a **continuous** sample space, e.g., all the values between and including 0 and 1 (e.g $0 \leq x \leq 1$). Since you can't enumerate all the values of a continuous sample space as we did with $S$ (people have "tried"; we'll talk about one such example later), we use a different form of notation. Suppose we have a continuous sample space $R$, then we would specify it as

$$
R = \{x\, | \, 0 \leq x \leq 1 \}
(\#eq:continuousset)
$$

The inclusion criteria for the set is written after the $|$ in the curly braces. The $|$ can be read loosely as meaning "where", so reading the whole thing in the curly braces left to right you get x _where_ $0 \leq x \leq 1$. Therefore, our set is all the $x$'s from 0 to 1. Note that I will occasionally drop the $x$ and $|$ when it is clear what variable I am referencing. As an aside, continuous sample spaces can be found everywhere in the field of behavioral statistics. For reasons that will become apparent later, we shall nonetheless discuss these spaces with slightly less mathematical depth. 

Having discussed discrete and continuous sample spaces, it is now time to turn our attention towards sampling. Suppose we are randomly drawing a single item from our sample space $S = \{A, B, C, D, E\}$. The _outcome_ of our experiment is a single item from our sample space, and we will talk about outcomes in terms of _events_. Events are described by a *subset* of the sample space. That is, they may be one or more outcomes combined. For example, we might say the event is $C = \{A, B, C\}$, and if our outcome lands in the that subset (as either A, B, or C), then we shall say the event "occurred". For the sake of brevity, and positivity, I will referred to the occurrence of an event as a "success" (congratulations all around!). You can indicate a set is a subset by:

$$ C \subset S 
(\#eq:subset) $$

In this case, we are saying $C$ is a subset of $S$. We might also, for example say that our event is a single element/outcome $C_1 = \{A\}$ or the entire sample space $C_2 = \{A,B,C,D,E\}$. We can be as creative as we would like to be, so long as the event is in our sample space. 

Indeed, in practice we might want to get a little more creative in terms of the outcomes of our random experiment. Let's talk about a slightly more complicated scenario. Suppose we have two events $C_1 = \{A,B,C\}$ and $C_2 = \{B,C,D\}$, and we are interested in whether or not our outcome lands in $C_1$ or $C_2$. It's helpful here to consider the circumstances where this event occurs. Namely, If our outcome was an A, B, C, or D, then we would be successful (success!). That is to say, we've taken all the unique outcomes of either set and combined them into a new set. If our outcome lands in that new subset, we can be confident that $C_1$ or $C_2$ occurred. There's a handy symbol that indicates this operation:

$$ C_1 \cup C_2 = \{A,B,C\}\:\cup\:\{B,C,D\} = \{A,B,C,D\} 
(\#eq:union) $$

This *union operator* ($\cup$) takes the unique elements of both sets and puts them into a set of their own. In this circumstance it is used synonymously with *or*. If the event of interest is our outcome landing in $C_1$ OR $C_2$, then we would be successful if the event landed in the union of the two sets, e.g., all the unique elements from both sets. Here's another example, suppose we are interested in if our outcome falls into $C_1 = \{A\}$ or $C_2 = \{B\}$. Then our event would occur if the element was A or B:

$$ \{A\}\:\cup\:\{B\} = \{A,B\} $$
Since we're being creative, let's consider another scenario (and a new operator!). Suppose we have our two previously described events - $C_1 = \{A,B,C\}$ and $C_2 = \{B,C,D\}$ - each a subset of $S$. Lets further say that we are interested in whether or not both events occur when we sample. That is, we shall be successful if our outcome falls in both $C_1$ and $C_2$. We are therefore interested in the _shared_ elements of our two events. If we draw a B or C, then we would be successful, but an A or D would be bad news for us because each is unique to a set! The *intersect operator* will help us signify this process:

$$ C_1 \cap C_2 = \{A,B,C\} \cap \{B,C,D\} = \{B,C\} 
(\#eq:intersect)$$

Unlike $\cup$, the intersect operator represents **and**. That is to say, if we are interested in the occurrence of one event AND another (a.k.a., our outcome landing in both events), then the intersect is used. This operator can create some interesting conundrums, so it's worthwhile to do another example or two. This time let's define our events to be $C_1 = \{A,B\}$ and $C_2 = \{C,D\}$. Now we're interested in whether or not our outcome falls in $C_1$ and $C_2$ (What do you think is going to happen here?):

$$ C_1 \cap C_2 = \{A, B\} \cap \{C, D\} = \{\} $$

Wow, that was an interesting result! Our two sets had no overlap. You couldn't possibly draw a single element that landed in _both_ the sets. As a result, we get a very special set - a *null set* - $\{\}$ - which is a set with zero elements. In this circumstance, when the intersect of sets results in a null set (a.k.a. they have no overlap), we shall refer to them as being **mutually exclusive** - because the two sets do not share elements.

It's interesting to see how a null set works with our operators and other sets that have elements. For example:

$$ \{A,B,C,D,E\} \cap \{\} = \{\} $$ 

A null set intersected with any other set is itself. A set with something in it can share nothing with a set that has no elements at all. In a way, intersecting the empty set with any other set is like multiplying a number by zero. On the other hand, what do you suppose happens when we union a null set with something else? Let's try it out:

$$ \{A,B,C,D,E\} \cup \{\} = \{A,B,C,D,E\} $$

A set unioned with a null set is itself. A null set has nothing unique to add to our "something set". Although the null set is really cool (in my opinion; and I hope your opinion too), working with it is, metaphorically speaking, like talking to the most boring person in the world. You have nothing in common with them ($\cap$), and they have nothing to add ($\cup$). And, with that, you have learned your first set theory insult.

Up to this point, we've learned how to describe our sample space, the concept of an outcome and event, how to create new events with union/intersect (or/and) operators, and the fancy null set. That's about all we need. I would like to finish out this brief section on sets with a discussion of the *complement* of a subset and a brief treatment of how the previously mentioned operators work in the continuous case.

The complement of a subset describes all the elements of a sample space _not_ in that subset. For the sake of consistency, we'll keep using our sample space $S$ \@ref(eq:discreteset), and let's work with $Y = \{A,B,C\}$, $Y\subset S$. The complement of that subset in the sample space would be $\{D, E\}$. The operation of taking the complement of a subset is indicated by:

$$ Y^c = \{A,B,C\}^c = \{D,E\} 
(\#eq:complement)$$

The complement allows for a wider breadth of operations. Let's again consider our sample space $S$. Suppose we were interested in an event that was NOT in the two subsets $C_1 = \{A,B\}$ or $C_2 =\{C,D\}$. The first thing we would do in this circumstance is maybe consider all the ways our outcome could be unsuccessful (we won't use "fail" here; too negative). It would be unsuccessful if it landed in $C_1$ or $C_2$. Recall that the $\cup$ (union) gives us the unique elements in both sets. Let's take these two sets and union them into a set $X$ together.

$$ C_1 \cup C_2 = \{A,B,C,D\} = X $$

Now that we have our subset of unsuccessful elements, we just take the complement of that:

$$ X^c = \{E\} $$

Of course, you might have known the answer to this all along, but it's nice to see the steps broken down exactly. You could have written it all in one go using parentheses to specify order of operations, e.g.:

$$ (C_1 \cup C_2)^c = \{A, B, C, D\}^c = \{E\} $$

Notice how we do the operation in the parentheses before taking the complement. Let's try one more example with $C_1$ and $C_2$. Let's say we defined a successful outcome as all the things NOT in $C_1$ and $C_2$. Notice the key word "and". Our list of unsuccessful items will be different this time because we are referring to the shared (intersect) of both our subsets. Therefore:

$$ (C_1 \cap C_2)^c = \{\}^c = \{A,B,C,D,E\} $$

The two sets have no overlap, so their intersect is a null set, and the complement of the null set is all the elements in our sample space.

With a good understanding of some of the basic operators and sets, let's turn to a brief treatment of the continuous sample space. The continuous case is very similar to the discrete case - although it takes some drawing of number lines if you are rusty with inequalities (no problem). Suppose we are sampling from a sample space $S = \{x\,|\,0 \leq x \leq 10 \}$ and we are interested in if the outcome lands in $C_1 = \{x\,|\,0 \leq x \leq 2 \}$ OR $C_2 = \{x\,|\,2 \leq x \leq 5 \}$. A successful outcome here would occur if our realized element landed anywhere from zero to five. In other words:

$$ \{0 \leq x \leq 2 \}\:\cup\:\{2 \leq x \leq 5\} = \{0 \leq x \leq 5\} $$

Let's keep the same continuous sample space and subsets as above, and this time let's look at the intersect of the two sets:

$$ \{0 \leq x \leq 2 \}\:\cap\:\{2 \leq x \leq 5\} = \{2\} $$

The two sets only overlap at exactly $x = 2$, so their intersect is just a set with the value 2. Let's do a couple more so you can get a sense for it. Suppose we have a sample space $Q = \{x\,|\, 5 \leq x \leq 10\}$ and define $C \subset Q$ where $C = \{x\,|\, 5 \leq x < 7\}$. That is to say, $C$ is a subset of Q, and its interval includes the lower side (5) but it doesn't include the upper side (7). What is the complement?

$$ C^c = \{5 \leq x < 7\}^c = \{7 \leq x \leq 10\} $$

The complement includes 7 up to 10. In the plot below, you can see a visual depiction of this. The top line represents the subset $C$, and the bottom line represents the complement. The open circle at the end of our subset $C$ indicates that the value 7 is not included in its range. The elements of C are strictly less than 7. This is in contrast to the complement line below - which has a solid black dot indicating 7's inclusion due to its exclusion from $C$. Thus the complement of $C$ ranges from 7 to 10.

```{r, echo = FALSE}
x <- c(5,7)
y <- c(.3,.3)
C <- data.frame(x,y)

C2 <- data.frame(x = c(7,10), y = c(.2,.2))

lines <- ggplot2::ggplot(C, ggplot2::aes(x = x, y = y)) +
  ggplot2::geom_line() +
  ggplot2::scale_y_continuous(limits = c(0,1), expand = ggplot2::expansion(c(.1,.1))) +
  ggplot2::geom_line(data = C2, ggplot2::aes(x = x, y = y)) +
  ggplot2::geom_point(x = 7, y = .3, shape = 21, fill = 'white', size = 2.5) +
  ggplot2::geom_point(x = 5, y = .3, shape = 21, fill = 'black', size = 2.5) +
  ggplot2::geom_point(x = 7, y = .2, shape = 21, fill = 'black', size = 2.5) +
  ggplot2::geom_point(x = 10, y = .2, shape = 21, fill = 'black', size = 2.5) +
  ggplot2::theme(axis.ticks.y = ggplot2::element_blank(), 
                 axis.line.y = ggplot2::element_blank(),
                 axis.text.y = ggplot2::element_blank(),
                 axis.title.y = ggplot2::element_blank(),
                 axis.title.x = ggplot2::element_text(size = 12, face = 'bold'),
                 panel.grid.major = ggplot2::element_blank(),
                 panel.grid.minor = ggplot2::element_blank(),
                 axis.text.x = ggplot2::element_text(size = 12, face = 'bold')) +
  ggplot2::coord_cartesian(xlim = c(5,10), ylim = c(0,.4))

print(lines)
```

One more comment is worth a mention with regards to continuous sample spaces. Suppose we have two subsets of our space $Q$ that don't overlap in any way. For example, take $C_1 = \{x\,|\, 5 \leq x < 7\}$ and $C_2 = \{x\,|\, 9 \leq x \leq 10\}$. Then you would simply write their union as:

$$ \{\, 5 \leq x < 7\} \cup \{\, 9 \leq x \leq 10\}$$
There is no simplified way to write this in set notation. Note the intersect of these two sets would be $\{\}$ - a null set.


### Repeated Samples
The previous introduction to sets was dedicated to a random experiment where we only draw a single element from our sample space. In practice, researchers and statisticians are often sampling/conducting a random experiment repeatedly. In this section we'll talk about how to describe the sample space of an experiment that involves multiple draws. Note, for the purposes of our learning, we shall only be discussing sampling with _replacement_. That is, we will be talking about circumstances where the 1st, 2nd, 3rd, ... , nth outcome gets returned to the sample space prior to the next draw. This is opposed to the circumstance where an outcome of a single sample reduces the size of the sample space each time. For example, suppose we have a sample space, $S = \{A,B,C\}$. On our first experiment, we randomly draw an $A$. In sampling without replacement, the sampling space for the next draw would be $\{B,C\}$ (or $\{A\}^c)$ and in sampling with replacement $A$ would be returned to the space.

To understand how to describe the sample spaces mentioned above, we'll turn to a good-old-fashioned coin toss (the mainstay of every introductory probability book). Suppose we perform a single flip (experiment) from a fair coin. Our sample space would be $S = \{H, T\}$ where $H$ is "heads", and $T$ is "tails". Now let's suppose we flip two counts. The sample space would be all the possible permutations of heads and tails from the two flips. It helps to draw draw a _tree diagram_ to get the gist of it.

```{r, echo = FALSE}
a <- data.frame(x = c(1,2,3,1,2,3,1,2,3,1,2,3), 
                y = c(1,1.5,1.75,1,1.5,1.25,1,.75,1,1,.75,.50),
                grp = c('A','A','A','B','B','B','C','C','C','D','D','D'),
                text = c('','H','H','','H','T','','T','H','','T','T'))
                

ggplot2::ggplot(a, ggplot2::aes(x = x, y = y, group = grp, label = text)) +
  ggplot2::geom_line() +
  ggplot2::geom_point() +
  ggplot2::geom_label() +
  ggplot2::theme(axis.ticks = ggplot2::element_blank(), 
                 axis.line = ggplot2::element_blank(),
                 axis.text = ggplot2::element_blank(),
                 axis.title = ggplot2::element_blank(),
                 panel.grid.major = ggplot2::element_blank(),
                 panel.grid.minor = ggplot2::element_blank())


```

You can follow the branches of the tree above to see each possible permutation of the two flips. For example, suppose the first flip was heads, you would follow the line at the first node (on the left) up the the "H" (heads) node. Then at the "heads" node, the next flip could either be an "H" (heads) or a "T" (tails), corresponding to the top and second from the top nodes on the right. Going down each branch, top-to-bottom, we get all the possible permutations of our two flips - $\{HH,HT,TH,TT\}$. Our random experiment is now a selection from this new sample space.

Drawing a tree to determine all the permutations of multiple draws, could get quite cumbersome, so it's convenient to have a formula. In the example above, the first flip could take 2 outcomes. The second flip would then result in two additional branches for each of the outcomes of the first flip. In other words, we have $2 \times 2 = 4$ possible permutations for the two coins. Had we flipped a third coin, each of nodes for the second flip would then be accompanied by two branches per node, so the calculation would be $2 \times 2 \times 2 = 8$ permutations. Indeed, given a sample space that has $N$ total elements/outcomes and $k$ repeated samples, all the possible permutations would be given by:

$$ N^k
(\#eq:permutations)$$

Note: If we had sampled from several sample spaces, all with a different number of elements, then then we would just multiply the respective element lengths together.

I will end this section with an important discussion on notation. As you can see from \@ref(eq:permutations), the sample space can grow quite rapidly. For example, four coin flips would have a sample space of 16 elements. Consider the two coin sample space - $\{HH,HT,TH,TT\}$. The event of getting a head on the first flip can be described by all the coin flip combinations with heads on the first flip - $\{HH,HT\}$. If our random experiment and outcome fell into this subset, we would indeed have flipped a heads on the first coin. Now consider a circumstance where the sample space is much larger (e.g. 10 coins), it would become quickly untenable to write out all the possible permutations. Instead in some circumstances I may use some short hand like $\{H \: on \: 1st \: flip\}$, because I don't have the rest of my natural born life to list permutations (and you don't have the rest of your natural born life to read them). Rest assured that these are exactly equivalent, and they shall be associated with the exact same probabilities. Indeed, sometimes the short hand will make it more clear as to what probability we are referring to.

## What is probability?
Near everyone has an intuitive sense of probability. In the crisp fall of the California foothills, you can ask a local of Placerville how often the apple orchards get overwhelmed with tourists. More often than not, they will give you some percentage of the time, and this time of the year that percentage will undoubtedly be 100%. You might ask a Sacramento resident how confident they are in their local basketball team winning, and indeed, they may also provide you with something close to a percentage of time (my guess is 15%). The two preceding scenarios are examples of the **relative frequency approach** to probability. In this approach, you can think of probability as a percentage - out of many many random experiments - that a particular outcome or event would occur. Within this approach, probabilities can take values anywhere from $0\leq x\leq1$. They can't go higher than one or less than zero - unless you are making a joke about your favorite basketball team's chances at winning the NBA playoffs. Exactness doesn't matter as much for humor as it does for mathematics.  

At any rate, in the last section we discussed how we might describe sample spaces, outcomes, and events of random experiments. In this section we'll assign probabilities to them, and we shall adopt the above relative frequency approach interpretation. Suppose we have some event $C$, then the *probability set operator* - $P()$ - takes $C$, and based on a set of rules, returns a probability for that event. The set of rules the probability set operator uses is often referred to as a probability distribution. We'll talk about probability distributions in the next chapter, and for now we'll just focus on probability and the probability set operator. For the most part, we'll consider just the discrete sample space in this section. The continuous case will take a bit more explanation.

Consider for a moment the circumstance at the end of last section, flipping two fair coins. If you recall, our sample space was $S = \{HH,HT,TH,TT\}$. Suppose the probability set operator assigns a probability of 1/4 to each of the outcomes in this sample space. The probability, for example, of the event $C = \{HH\}$ would therefore be

$$ P(C) = P(\{HH\}) = 1/4 $$

As such, in this random experiment you might expect about 25% of the time the outcome would be two heads. But what about the event we discussed at the end of last section? Suppose we wanted to know the probability of getting a heads on the first flip - $C = \{HH,HT\}$, how might we go about this? Well, lucky for us, there is the *law of addition* for probability. For two events $A$ and $B$ for which $A \cup B = \{\}$ (e.g. they are mutually exclusive):

$$ P(A \cup B) = P(A) + P(B) 
(\#eq:addlaw)$$

For convenience, I sometimes refer to this law as the law of "or", because it helps calculate the probability of success if we want our outcome to land in one event OR another event. So how does this law apply to our event $C$ above? Well, every event can just be written as a union of mutually exclusive events. In our case,

$$ C = \{HH,HT\} = \{HH\} \cup \{HT\} $$

And with this in mind, we can apply the law of addition:

$$ P(\{HH\} \cup \{HT\}) = P(HH) + P(HT) = \frac{1}{4} + \frac{1}{4} = \frac{2}{4} = \frac{1}{2} $$